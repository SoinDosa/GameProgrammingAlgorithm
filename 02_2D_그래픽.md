## CRT 모니터
* 수년간 디스플레이 기술을 차지하던 디스플레이.
* CRT의 모든 그리기 작업은 전자의 흐름을 발사하는 전자총이 전담
* 화면의 왼쪽위 모서리에서 시작해 수평방향르로 가로지르며 주사선을 그리고, 바로 다음 주사선의 맨 왼쪽으로 다시 이동하여 렌더링을 반복
  * 오른쪽 아래 모서리에서 왼쪽 위 모서리로 전자총을 되돌리는데 걸리는 시간을 수직 공백 시간(VBLANK)라고 함
### 색상 버퍼와 수직 동기화
* 요즘 하드웨어는 메모리가 넉넉해서 화면 전체의 픽셀 데이터를 한 번에 색상버퍼에 저장할 수 있음
* 하지만 그렇다고 해도 게임루프가 전자총을 신경쓰지 않는 것은 아님
  * 예시)전자총이 화면을 반 쯤 그렸을 때 게임 루프가 '출력생성'단계에 들어가는 상황이 발생하면 전자총이 아직 데이터를 그리는 중임에도 다음 프레임의 픽셀 정보를 색상 버퍼에 쓸수도 있다.
  * 이는 화면의 반이 잘못 그려질 뿐 아니라 그래픽 데이터의 손실을 야기할수도 있다. 이를 화면 밀림(screen tearing)이라고 한다.
* 화면 밀림을 해결하는 방법중 하나는 게임 루프를 수정해서 수직 공백 시간 내에 렌더링을 수행하는 것
  * 하지만 이는 최신 게임을 렌더링하기에는 턱없이 모자란 시간이다
* 다른 해결책으로 이중 버퍼링(double buffering) 렌더링 기법이 있음
  * 두 개 이상의 색상 버퍼를 사용하여 두 개으 버퍼를 번갈아 사용하며 그리기를 수행하게 한다.
    * 화면 밀림을 완벽하게 바지하려면 버퍼 교환이 VBLANK안에 이루어져야 한다
  * 예시)A 버퍼의 내용을 그리는 동안 게임 루프는 B버퍼를 채우고, 다음 프레임에서 게임루프가 A버퍼를 채우는 동안 B버퍼의 내용을 그린다
    * 주로 수직동기화에 사용
  * 화면밀림을 감수하고 렌더링이 끝나는 즉시 버퍼교환을 허용하는 게임도 있다

## 스프라이트
* 하나의 이미지를 사용해서 프레임에 그려질 수 있는 2D 오브젝트
* painter's algorithm을 적용하여 스프라이트를 표현할 순서(draw order)에 맞게 리스트에 정렬하여 맞게 그려야한다
* 각 스프라이트 오브젝트는 x, y같은 좌표와 그리기 순서값을 포함할 수 있다
  * x, y좌표는 라이브러리에 따라 달라질 수 있음(원점의 위치의 차이)
### 스프라이트애니메이션
* 전통적인 플립 북 애니메이션의 원리를 기본으로 함
* 이를 매끄럽게 표현하려면 최소 24FPS 정도가 되어야함
### 스프라이트시트 
* 하나의 이미지 파일에 모든 스프라이트를 넣어 메모리 공간낭비 문제를 해결한 것
  
## 스크롤 
### 단일 축 스크롤
* 게임을 x방향, 또는 y방향으로만 스크롤함
* 플레이어(카메라)의 위치에 따라 배경이미지를 렌더링하는 방식을 이용
  * 카메라의 경우는 clamp함수를 적용하여 배경 바깥부분으로 벗어나지 못하게 고정
### 시차스크롤 
* 배경을 심도에 따라 여러 개의 레이어로 나누어 원근감을 주는 스크롤 기법
* 각 레이어에 배경을 하나 씩 할당함
### 네방향스크롤 
* 라이브러리 별로 좌표의 원점을 생각하여 카메라의 위치를 파악
* 1차원 리스트를 사용하면 배경조각 처리가 힘드므로, 2차원 배열에 배경 조각을 저장해놓고 화면의 왼쪽 위에 표시할 배경 조각의 행과 열을 정한다
  * 왼쪽 위에 효시할 배경 조각이 정해지고 나면 나머지 세 개는 아주 쉽게 정해진다
## 타일맵 
* 게임 세계를 똑같은 크기의 정사각형이나 기타 다각형으로 나누는 기법
* 모든 장면을 텍스처로 만들어 메모리낭비가 심해지는 것을 막기위한 기법
### 아이소메트릭 타일맵 
* 탑다운 뷰나 사이드 뷰와는 다르게 심도가 느껴지게 살짝 비스듬하게 돌려서 표현한 뷰
* 타일을 마름모나 육각형으로 만들어야 함

## 연습문제
1. 전자총이 CRT화면을 그리는 방법을 설명하라. 또 수직 공백시간 VBLANK에 관해 설명하라
2. 화면 밀림에 관해 설명하고 화면 밀림을 막는 방법을 설명하라
3. 하나의 색상 버퍼가 아닌 이중 버퍼링을 사용할 때의 장점을 설명하라.
4. 화가 알고리즘이란?
> 장면을 뒤에서 앞의 순서로 그리는 렌더링 기법
5. 스프라이트를 각각 따로 두지 않고 스프라이트 시트에 넣을 때의 장점을 설명하라
6. 한 방향으로만 스크롤하는 게임에서 카메라의 위치를 업데이트해야 할 때는 언제인가?
> 플레이어가 화면의 중앙을 넘어갈 때 카메라의 위치를 업데이트해야한다
7. 단일 축 양방향 스크롤을 구현할 때 한 번에 모든 배경 조각을 메모리에 올릴 수 없다면 어떤 데이터 구조를 사용해야 그려야 할 배경 조각을 제대로 선택할 수 있을까?
> 이중연결리스트를 사용하면 앞쪽 배경과 뒷쪽 배경조각을 모두 가리킬 수 있다
8. 타일 맵과 타일 셋의 차이를 설명하라.
9. 애니메이션 스프라이트 클래스에 애니메이션의 FPS를 멤버변수로 추가하는 것이 좋은 이유를 설명하라.
> 애니메이션의 재생솏도를 자유자재로 변경할 수 있다. 캐릭터의 움직임이 빨라지면 달리는 애니메이션을 더 빠르게 재생하는 등
10. 아이소메트릭 뷰와 탑다운 뷰의 차이점을 설명하라
